# Generated by Django 5.2.8 on 2026-01-30 20:23

import django.db.models.deletion
import health_insurance.models
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='CoveragePlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم الخطة')),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='رمز الخطة')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('base_rate', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='السعر الأساسي')),
                ('coverage_type', models.CharField(max_length=50, verbose_name='نوع التغطية')),
                ('max_annual_limit', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='الحد السنوي الأقصى')),
                ('hospital_room_limit', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='حد غرفة المستشفى')),
                ('outpatient_limit', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='حد العيادات الخارجية')),
                ('maternity_coverage', models.BooleanField(default=False, verbose_name='تغطية الأمومة')),
                ('dental_coverage', models.BooleanField(default=False, verbose_name='تغطية الأسنان')),
                ('optical_coverage', models.BooleanField(default=False, verbose_name='تغطية النظارات')),
                ('chronic_diseases_coverage', models.BooleanField(default=False, verbose_name='تغطية الأمراض المزمنة')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'خطة تغطية',
                'verbose_name_plural': 'خطط التغطية',
            },
        ),
        migrations.CreateModel(
            name='HealthCoveragePlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('plan_type', models.CharField(choices=[('basic', 'أساسي'), ('standard', 'قياسي'), ('premium', 'متميز'), ('custom', 'مخصص')], default='standard', max_length=20)),
                ('description', models.TextField(blank=True)),
                ('outpatient_limit', models.DecimalField(decimal_places=2, default=5000, max_digits=10)),
                ('inpatient_limit', models.DecimalField(decimal_places=2, default=50000, max_digits=10)),
                ('dental_limit', models.DecimalField(decimal_places=2, default=2000, max_digits=10)),
                ('optical_limit', models.DecimalField(decimal_places=2, default=1500, max_digits=10)),
                ('emergency_limit', models.DecimalField(decimal_places=2, default=10000, max_digits=10)),
                ('outpatient_coverage', models.IntegerField(default=80)),
                ('inpatient_coverage', models.IntegerField(default=90)),
                ('dental_coverage', models.IntegerField(default=70)),
                ('optical_coverage', models.IntegerField(default=80)),
                ('base_price_per_employee', models.DecimalField(decimal_places=2, default=1000, max_digits=8)),
                ('includes_preventive_care', models.BooleanField(default=True)),
                ('includes_chronic_medication', models.BooleanField(default=True)),
                ('includes_work_accidents', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'health_coverage_plan',
                'ordering': ['base_price_per_employee'],
            },
        ),
        migrations.CreateModel(
            name='SectorPricingFactor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('sector', models.CharField(choices=[('health_hospital', 'مستشفى'), ('health_clinic', 'عيادة'), ('health_pharmacy', 'صيدلية'), ('health_lab', 'مختبر طبي'), ('health_center', 'مركز طبي'), ('health_dental', 'عيادة أسنان'), ('health_optical', 'مركز بصريات'), ('health_other', 'خدمات صحية أخرى'), ('tech_software', 'شركة برمجيات'), ('tech_web', 'تطوير مواقع وتطبيقات'), ('tech_ai', 'ذكاء اصطناعي'), ('tech_cyber', 'أمن سيبراني'), ('tech_cloud', 'حوسبة سحابية'), ('tech_gaming', 'ألعاب إلكترونية'), ('tech_other', 'تكنولوجيا أخرى'), ('construction_civil', 'مقاولات إنشائية'), ('construction_electrical', 'مقاولات كهرباء'), ('construction_mechanical', 'مقاولات ميكانيكا'), ('construction_roads', 'مقاولات طرق وجسور'), ('construction_decoration', 'تشطيب وديكور'), ('construction_other', 'مقاولات أخرى'), ('retail_store', 'متجر تجزئة'), ('wholesale', 'توزيع وتجارة جملة'), ('ecommerce', 'متجر إلكتروني'), ('retail_other', 'تجارة أخرى'), ('services_logistics', 'شركة شحن ولوجستيات'), ('services_cleaning', 'خدمات نظافة'), ('services_maintenance', 'صيانة وخدمات فنية'), ('services_transport', 'نقل ومواصلات'), ('services_other', 'خدمات أخرى'), ('other', 'أخرى')], max_length=50, unique=True)),
                ('base_factor', models.DecimalField(decimal_places=2, default=Decimal('1.00'), max_digits=5)),
                ('risk_adjustment', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'db_table': 'sector_pricing_factor',
            },
        ),
        migrations.CreateModel(
            name='Company',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, unique=True)),
                ('sector', models.CharField(choices=[('health_hospital', 'مستشفى'), ('health_clinic', 'عيادة'), ('health_pharmacy', 'صيدلية'), ('health_lab', 'مختبر طبي'), ('health_center', 'مركز طبي'), ('health_dental', 'عيادة أسنان'), ('health_optical', 'مركز بصريات'), ('health_other', 'خدمات صحية أخرى'), ('tech_software', 'شركة برمجيات'), ('tech_web', 'تطوير مواقع وتطبيقات'), ('tech_ai', 'ذكاء اصطناعي'), ('tech_cyber', 'أمن سيبراني'), ('tech_cloud', 'حوسبة سحابية'), ('tech_gaming', 'ألعاب إلكترونية'), ('tech_other', 'تكنولوجيا أخرى'), ('construction_civil', 'مقاولات إنشائية'), ('construction_electrical', 'مقاولات كهرباء'), ('construction_mechanical', 'مقاولات ميكانيكا'), ('construction_roads', 'مقاولات طرق وجسور'), ('construction_decoration', 'تشطيب وديكور'), ('construction_other', 'مقاولات أخرى'), ('retail_store', 'متجر تجزئة'), ('wholesale', 'توزيع وتجارة جملة'), ('ecommerce', 'متجر إلكتروني'), ('retail_other', 'تجارة أخرى'), ('services_logistics', 'شركة شحن ولوجستيات'), ('services_cleaning', 'خدمات نظافة'), ('services_maintenance', 'صيانة وخدمات فنية'), ('services_transport', 'نقل ومواصلات'), ('services_other', 'خدمات أخرى'), ('other', 'أخرى')], max_length=50)),
                ('sub_sector', models.CharField(blank=True, max_length=100)),
                ('size_category', models.CharField(choices=[('micro', 'صغيرة جدا (1-5 موظفين)'), ('small', 'صغيرة (6-50 موظفين)'), ('medium', 'متوسطة (51-250 موظفين)'), ('large', 'كبيرة (251-1000 موظفين)'), ('enterprise', 'عملاقة (1000+ موظفين)')], default='small', max_length=20)),
                ('employees_data', models.JSONField(blank=True, default=dict)),
                ('cr_number', models.CharField(max_length=50, unique=True)),
                ('address', models.TextField()),
                ('city', models.CharField(default='صنعاء', max_length=100)),
                ('country', models.CharField(default='اليمن', max_length=100)),
                ('phone', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('website', models.URLField(blank=True, null=True)),
                ('tax_number', models.CharField(blank=True, max_length=50, null=True)),
                ('total_employees', models.IntegerField(default=1)),
                ('male_employees', models.IntegerField(default=0)),
                ('female_employees', models.IntegerField(default=0)),
                ('insured_employees', models.IntegerField(default=0)),
                ('establishment_age', models.IntegerField(default=1)),
                ('founded_date', models.DateField(blank=True, null=True)),
                ('work_environment', models.CharField(choices=[('office', 'عمل مكتبي'), ('field', 'عمل ميداني'), ('mixed', 'مختلط (مكتبي وميداني)'), ('remote', 'عمل عن بعد'), ('hazardous', 'بيئة خطرة')], default='office', max_length=20)),
                ('risk_level', models.CharField(choices=[('low', 'مخاطر منخفضة'), ('medium', 'مخاطر متوسطة'), ('high', 'مخاطر عالية'), ('very_high', 'مخاطر عالية جداً')], default='medium', max_length=20)),
                ('annual_revenue', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('has_previous_insurance', models.BooleanField(default=False)),
                ('previous_insurance_years', models.IntegerField(default=0)),
                ('claims_history', models.IntegerField(default=0)),
                ('employees_file', models.FileField(blank=True, null=True, upload_to='companies/employee_files/')),
                ('sector_data', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'company',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Employee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('age', models.IntegerField()),
                ('gender', models.CharField(choices=[('male', 'ذكر'), ('female', 'أنثى')], max_length=10)),
                ('marital_status', models.CharField(choices=[('single', 'أعزب'), ('married', 'متزوج')], max_length=20)),
                ('position', models.CharField(max_length=100)),
                ('department', models.CharField(max_length=100)),
                ('base_salary', models.DecimalField(decimal_places=2, max_digits=10)),
                ('monthly_allowances', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('number_of_children', models.IntegerField(default=0)),
                ('children_count', models.IntegerField(default=0, verbose_name='عدد الأبناء')),
                ('employee_number', models.CharField(blank=True, max_length=50, null=True)),
                ('insurance_profile', models.JSONField(blank=True, default=dict)),
                ('wives_count', models.IntegerField(default=0, verbose_name='عدد الزوجات')),
                ('chronic_diseases', models.BooleanField(default=False, verbose_name='أمراض مزمنة')),
                ('include_parents', models.BooleanField(default=False, verbose_name='يشمل الوالدين')),
                ('parents_count', models.IntegerField(default=0, verbose_name='عدد الوالدين')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employees', to='health_insurance.company')),
            ],
            options={
                'verbose_name': 'موظف',
                'verbose_name_plural': 'الموظفين',
            },
        ),
        migrations.CreateModel(
            name='HealthCalculationLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('company_sector', models.CharField(choices=[('health_hospital', 'مستشفى'), ('health_clinic', 'عيادة'), ('health_pharmacy', 'صيدلية'), ('health_lab', 'مختبر طبي'), ('health_center', 'مركز طبي'), ('health_dental', 'عيادة أسنان'), ('health_optical', 'مركز بصريات'), ('health_other', 'خدمات صحية أخرى'), ('tech_software', 'شركة برمجيات'), ('tech_web', 'تطوير مواقع وتطبيقات'), ('tech_ai', 'ذكاء اصطناعي'), ('tech_cyber', 'أمن سيبراني'), ('tech_cloud', 'حوسبة سحابية'), ('tech_gaming', 'ألعاب إلكترونية'), ('tech_other', 'تكنولوجيا أخرى'), ('construction_civil', 'مقاولات إنشائية'), ('construction_electrical', 'مقاولات كهرباء'), ('construction_mechanical', 'مقاولات ميكانيكا'), ('construction_roads', 'مقاولات طرق وجسور'), ('construction_decoration', 'تشطيب وديكور'), ('construction_other', 'مقاولات أخرى'), ('retail_store', 'متجر تجزئة'), ('wholesale', 'توزيع وتجارة جملة'), ('ecommerce', 'متجر إلكتروني'), ('retail_other', 'تجارة أخرى'), ('services_logistics', 'شركة شحن ولوجستيات'), ('services_cleaning', 'خدمات نظافة'), ('services_maintenance', 'صيانة وخدمات فنية'), ('services_transport', 'نقل ومواصلات'), ('services_other', 'خدمات أخرى'), ('other', 'أخرى')], max_length=50)),
                ('company_size', models.CharField(choices=[('micro', 'صغيرة جدا (1-5 موظفين)'), ('small', 'صغيرة (6-50 موظفين)'), ('medium', 'متوسطة (51-250 موظفين)'), ('large', 'كبيرة (251-1000 موظفين)'), ('enterprise', 'عملاقة (1000+ موظفين)')], max_length=20)),
                ('employee_count', models.IntegerField()),
                ('coverage_plan_name', models.CharField(max_length=100)),
                ('calculated_premium', models.DecimalField(decimal_places=2, max_digits=10)),
                ('factors_used', models.JSONField(default=dict)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'health_calculation_log',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HealthInsuranceQuote',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('calculation_data', models.JSONField(blank=True, default=dict)),
                ('coverage_details', models.JSONField(blank=True, default=dict)),
                ('quote_number', models.CharField(default=health_insurance.models.generate_health_quote_number, max_length=20, unique=True)),
                ('insurance_type', models.CharField(blank=True, default='B', max_length=10)),
                ('insured_employees_count', models.IntegerField(default=1)),
                ('coverage_period', models.IntegerField(default=12)),
                ('base_premium', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_premium', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('annual_premium', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('monthly_premium', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('pending', 'قيد المراجعة'), ('quoted', 'مقتبس'), ('accepted', 'مقبول'), ('rejected', 'مرفوض'), ('expired', 'منتهي')], default='draft', max_length=20)),
                ('valid_until', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('employees_file', models.FileField(blank=True, null=True, upload_to='employee_files/quotes/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='quotes', to='health_insurance.company')),
                ('coverage_plan', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='health_insurance.healthcoverageplan')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'health_insurance_quote',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HealthInsurancePolicy',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('policy_number', models.CharField(max_length=100, unique=True)),
                ('total_premium', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('annual_premium', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('monthly_premium', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('paid_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('due_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('insurance_type', models.CharField(default='B', max_length=10)),
                ('payment_method', models.CharField(default='annual', max_length=20)),
                ('coverage_options', models.JSONField(blank=True, default=dict)),
                ('coverage_details', models.JSONField(blank=True, default=dict)),
                ('calculation_data', models.JSONField(blank=True, default=dict)),
                ('family_members', models.JSONField(blank=True, default=dict)),
                ('policy_details', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('pending', 'معلق'), ('active', 'نشط'), ('expired', 'منتهي'), ('cancelled', 'ملغي')], default='pending', max_length=20)),
                ('payment_status', models.CharField(choices=[('pending', 'قيد الدفع'), ('partial', 'مدفوع جزئياً'), ('paid', 'مدفوع'), ('overdue', 'متأخر'), ('cancelled', 'ملغي')], default='pending', max_length=20)),
                ('inception_date', models.DateField()),
                ('expiry_date', models.DateField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('total_employees', models.IntegerField(default=0)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='health_policies', to='health_insurance.company')),
                ('coverage_plan', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='health_insurance.coverageplan')),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('quote', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='policies', to='health_insurance.healthinsurancequote')),
            ],
        ),
        migrations.AddConstraint(
            model_name='company',
            constraint=models.UniqueConstraint(fields=('user', 'name'), name='unique_company_name_per_user', violation_error_message='يجب أن يكون اسم الشركة فريداً بالنسبة لك'),
        ),
    ]
